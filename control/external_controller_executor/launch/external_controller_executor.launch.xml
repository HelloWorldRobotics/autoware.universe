<launch>
  <!-- optional parameters are written here -->
  <arg name="lateral_controller_mode" default="mpc"/>
  <arg name="longitudinal_controller_mode" default="pid"/>
  <!-- <arg name="use_individual_control_param" default="false"/> -->
  <!-- <arg name="enable_autonomous_emergency_braking" default="false"/> -->
  <!-- <arg name="enable_predicted_path_checker" default="false"/>  -->
  <arg name="vehicle_model" default="lexus"/>

  <!-- engage_transition_manager -->
  <node pkg="external_controller_executor" exec="external_controller_executor_node_exe" name="external_controller_executor" output="screen">
    <param from="$(find-pkg-share autoware_launch)/config/control/trajectory_follower/lateral/mpc.param.yaml" />
    <param from="$(find-pkg-share autoware_launch)/config/control/trajectory_follower/longitudinal/pid.param.yaml" />
    <param from="$(find-pkg-share autoware_launch)/config/planning/scenario_planning/common/nearest_search.param.yaml"/>
    <param from="$(find-pkg-share autoware_launch)/config/control/trajectory_follower/trajectory_follower_node.param.yaml"/>
    <param from="$(find-pkg-share $(var vehicle_model)_description)/config/vehicle_info.param.yaml"/>
    <param name="lateral_controller_mode" value="$(var lateral_controller_mode)"/>
    <param name="longitudinal_controller_mode" value="$(var longitudinal_controller_mode)"/>

    <remap from="input/reference_trajectory" to="/planning/scenario_planning/trajectory"/>
    <remap from="input/current_odometry" to="/localization/odometry"/>
    <remap from="input/current_steering" to="/vehicle/status/steering_status"/>
    <remap from="input/current_accel" to="/localization/acceleration"/>
    <remap from="input/current_operation_mode" to="/system/operation_mode/state"/>
    <remap from="output/predicted_trajectory" to="lateral/predicted_trajectory_for_evaluation"/>
    <remap from="output/lateral_diagnostic" to="lateral/diagnostic_for_evaluation"/>
    <remap from="output/slope_angle" to="longitudinal/slope_angle_for_evaluation"/>
    <remap from="output/longitudinal_diagnostic" to="longitudinal/diagnostic_for_evaluation"/>
    <remap from="output/control_cmd" to="control_cmd_for_evaluation"/>

  </node>
</launch>
